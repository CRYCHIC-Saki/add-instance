{
  "instance_id": "Multi-SWE-Bench/rust/maintenance/bugfix/aa16b8b2",
  "version": "v0.1",
  "category": "maintenance",
  "subcategory": "bugfix",
  "languages": [
    "rust"
  ],
  "repo": {
    "origin": "github://tokio-rs/tracing",
    "commit_pre": "908cc432a5994f6e17c8f36e13c217dc40085704"
  },
  "instruction": {
    "type": "issue",
    "text": "attributes: force instrumented function to be `FnOnce`\n<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tracing/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\nCloses #2857 \r\n\r\n\r\n## Motivation\r\n\r\nFunctions which are `Fn` or `FnMut` fail to compile when they are instrumented with `#[instrument(ret)]`\r\n\r\n## Solution\r\n\r\nI've added a non-copy zst (`[&mut (), 0]`) to the generated code that is moved inside the function so that it is forced to be no more than `FnOnce`."
  },
  "gold_slice": {
    "file": [
      "tracing-attributes/src/expand.rs"
    ]
  },
  "gold_patch": {
    "diff_uri": "patches/Multi-SWE-Bench__rust__maintenance__bugfix__aa16b8b2.diff"
  },
  "build": {
    "cmd_test": "cargo test"
  },
  "verification": {
    "kind": [
      "unit"
    ]
  },
  "original_instance_id": "tokio-rs__tracing-2897"
}